(this["webpackJsonpyorkie-codepair"]=this["webpackJsonpyorkie-codepair"]||[]).push([[0],{135:function(e,t,a){e.exports={box:"ShareButton_box__2glbz",button:"ShareButton_button__37fOT"}},221:function(e,t,a){},222:function(e,t,a){},224:function(e,t,a){},225:function(e,t,a){},227:function(e,t,a){"use strict";a.r(t);var n,r,o,i=a(0),c=a.n(i),s=a(13),u=a.n(s),l=a(8),d=a(77),h=a(294),m=a(145),f=a(21),v=a(97),p=a(291),b=a(146),g=a(290),y=a(29),E=a(18),O=a(19),j=function(){function e(t){Object(E.a)(this,e),this.key=void 0,this.storage=void 0,this.key=t,this.storage=window.localStorage}return Object(O.a)(e,[{key:"getValue",value:function(e){try{return JSON.parse(this.storage[this.key])}catch(t){return e}}},{key:"setValue",value:function(e){this.storage[this.key]=JSON.stringify(e)}}]),e}();!function(e){e.Dark="dark",e.Light="light"}(n||(n={})),function(e){e.Sublime="sublime",e.Vim="vim",e.Emacs="emacs"}(r||(r={})),function(e){e.Two="2",e.Four="4",e.Eight="8"}(o||(o={}));var k=new j("$$codepair$$setting"),x=k.getValue({menu:{theme:n.Dark,codeKeyMap:r.Sublime,tabSize:o.Two}}),w=Object(y.c)({name:"setting",initialState:x,reducers:{setDarkMode:function(e,t){e.menu.theme=t.payload?n.Dark:n.Light,k.setValue(e)},setCodeKeyMap:function(e,t){e.menu.codeKeyMap=t.payload,k.setValue(e)},setTabSize:function(e,t){e.menu.tabSize=t.payload,k.setValue(e)}}}),C=w.actions,S=C.setDarkMode,D=C.setCodeKeyMap,M=C.setTabSize,N=w.reducer,z=a(273),T=a(300),L=a(283),I=a(284),W=a(152),R=a(17),B=a(234),A=a(275),P=a(298),F=a(80),U=a.n(F),H=a(269);function K(e){var t=e.anchorEl,a=e.onClose,n=e.children,r=e.anchorOrigin,o=e.transformOrigin,i=Boolean(t);return c.a.createElement(H.a,{id:i?"simple-popover":void 0,open:i,anchorEl:t,onClose:a,anchorOrigin:r,transformOrigin:o},n)}K.defaultProps={anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}};var V,Y=a(274),_=a(230),G=Object(z.a)((function(){return{root:function(e){return{color:e.peer.metadata.color}}}}));function X(e){var t=G(e),a=e.peer;return c.a.createElement(_.a,{className:t.root},a.metadata.username)}!function(e){e.Connected="connected",e.Disconnected="disconnected"}(V||(V={}));var J=Object(y.c)({name:"peer",initialState:{peers:{}},reducers:{syncPeer:function(e,t){for(var a=t.payload,n=a.myClientID,r=a.changedPeers,o=e.peers,i=0,c=Object.keys(o);i<c.length;i++){var s=c[i];r[s]||(o[s].status=V.Disconnected)}for(var u=0,l=Object.entries(r);u<l.length;u++){var d=Object(R.a)(l[u],2),h=d[0],m=d[1];if(!o[h]||o[h].status===V.Disconnected){var f={id:h,status:V.Connected,metadata:m,isMine:n===h};e.peers[h]=f}}}}}),$=J.actions.syncPeer,q=J.reducer;function Q(){var e=Object(l.c)((function(e){return e.docState.client})),t=Object(l.c)((function(e){return e.peerState.peers}));return{activePeers:Object(i.useMemo)((function(){return e?Object.values(t).filter((function(e){return e.status===V.Connected})):[]}),[e,t])}}function Z(){var e=Q().activePeers;return c.a.createElement(Y.a,null,c.a.createElement(_.a,null,c.a.createElement(W.a,null,"Total ",e.length)),e.map((function(e){return c.a.createElement(X,{key:e.id,peer:e})})))}var ee=Object(z.a)((function(e){return{group:{"& > *":{cursor:"pointer"}},myAvatar:{borderColor:e.palette.secondary.main}}}));function te(){var e=ee(),t=Object(l.c)((function(e){return e.docState.client})),a=Q().activePeers,n=Object(i.useState)(),r=Object(R.a)(n,2),o=r[0],s=r[1],u=Object(i.useCallback)((function(e){e.target.getAttribute("data-id")||s(e.currentTarget)}),[s]),d=Object(i.useCallback)((function(){s(void 0)}),[s]);return t?c.a.createElement(c.a.Fragment,null,c.a.createElement(A.a,{className:e.group,max:4,onClick:u},a.map((function(t){var a=t.metadata,n=a.username,r=a.color,o=a.image;return c.a.createElement(P.a,{key:t.id,title:t.isMine?"[ME] ".concat(n):n,"data-id":t.id,arrow:!0},c.a.createElement(B.a,{alt:"Peer Image",className:t.isMine?e.myAvatar:"",style:{backgroundColor:r},src:U.a.getImage(o)}))}))),c.a.createElement(K,{anchorEl:o,onClose:d},c.a.createElement(Z,null))):null}var ae=a(131),ne=a(132),re=a.n(ne),oe=a(295),ie=a(282),ce=a(278),se=a(136),ue=a.n(se),le=a(137),de=a.n(le),he=a(148),me=a(5),fe=a(303),ve=a(277),pe=a(279),be=a(280),ge=a(133),ye=a.n(ge),Ee=a(276),Oe=Object(me.a)((function(e){return Object(T.a)({root:{margin:0,padding:e.spacing(2)},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}})}))((function(e){var t=e.children,a=e.classes,n=e.onClose,r=Object(he.a)(e,["children","classes","onClose"]);return c.a.createElement(ve.a,Object.assign({disableTypography:!0,className:a.root},r),c.a.createElement(W.a,{variant:"h6"},t),n?c.a.createElement(ce.a,{"aria-label":"close",className:a.closeButton,onClick:n},c.a.createElement(ye.a,null)):null)})),je=Object(me.a)((function(e){return{root:{padding:e.spacing(2)}}}))(pe.a),ke=Object(me.a)((function(e){return{root:{margin:0,padding:e.spacing(1)}}}))(be.a);function xe(e){var t=e.open,a=e.onClose,n=e.className,r=e.children;return t?c.a.createElement(fe.a,{onClose:a,open:t,maxWidth:"md"},c.a.createElement("div",{className:n},r)):null}xe.defaultProps={className:""};var we=xe,Ce=a(281);function Se(e){var t=e.timeout,a=e.show,n=e.onFadeout,r=e.children,o=Object(i.useRef)(null);return Object(i.useEffect)((function(){return a&&(o.current=window.setTimeout((function(){n(),o.current=null}),t)),function(){o.current&&clearTimeout(o.current)}}),[a]),c.a.createElement(Ce.a,{in:a},c.a.createElement("div",null,a?r:null))}Se.defaultProps={timeout:1e3};var De,Me,Ne=Se,ze=a(47),Te=a.n(ze),Le=a(76),Ie=a(99),We=a.n(Ie),Re=a(134),Be=a.n(Re);!function(e){e.Markdown="gfm",e.Go="go",e.JavaScript="javascript",e.Clojure="clojure",e.Dart="dart",e.Python="python",e.Ruby="ruby",e.Rust="rust"}(De||(De={})),function(e){e.Disconnect="disconnect",e.Connect="connect"}(Me||(Me={}));var Ae={mode:De.Markdown,loading:!0,errorMessage:"",status:Me.Connect},Pe=Object(y.b)("doc/activate",function(){var e=Object(Le.a)(Te.a.mark((function e(t,a){var n,r,o,i;return Te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=U.a.generate(),r=n.name,o=n.animal,i=We.a.createClient("".concat("https://api.yorkie.dev"),{metadata:{username:r,image:o,color:Be()()}}),e.next=5,i.activate();case 5:return e.abrupt("return",{client:i});case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",a.rejectWithValue(e.t0.message));case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,a){return e.apply(this,arguments)}}()),Fe=Object(y.b)("doc/attach",function(){var e=Object(Le.a)(Te.a.mark((function e(t,a){var n,r;return Te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.client,r=t.doc,e.prev=1,e.next=4,n.attach(r);case 4:return r.update((function(e){e.content||e.createText("content"),e.shapes||(e.shapes=[])})),e.next=7,n.sync();case 7:return e.abrupt("return",{doc:r,client:n});case 10:return e.prev=10,e.t0=e.catch(1),e.abrupt("return",a.rejectWithValue(e.t0.message));case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,a){return e.apply(this,arguments)}}()),Ue=Object(y.c)({name:"doc",initialState:Ae,reducers:{deactivateClient:function(e){var t=e.client;e.client=void 0,null===t||void 0===t||t.deactivate()},createDocument:function(e,t){e.doc=We.a.createDocument("codepairs",t.payload)},detachDocument:function(e){var t=e.doc,a=e.client;e.doc=void 0,null===a||void 0===a||a.detach(t)},attachDocLoading:function(e,t){e.loading=t.payload},setCodeMode:function(e,t){e.mode=t.payload},setStatus:function(e,t){e.status=t.payload}},extraReducers:function(e){e.addCase(Pe.fulfilled,(function(e,t){var a=t.payload;e.client=a.client})),e.addCase(Pe.rejected,(function(e,t){var a=t.payload;e.errorMessage=a})),e.addCase(Fe.fulfilled,(function(e,t){var a=t.payload;e.doc=a.doc,e.client=a.client})),e.addCase(Fe.rejected,(function(e,t){var a=t.payload;e.errorMessage=a}))}}),He=Ue.actions,Ke=He.deactivateClient,Ve=He.createDocument,Ye=He.detachDocument,_e=He.attachDocLoading,Ge=He.setCodeMode,Xe=He.setStatus,Je=Ue.reducer,$e=a(135),qe=a.n($e),Qe=re.a.bind(qe.a),Ze=Object(z.a)((function(){return{dialog:{borderRadius:"4px"},input:{width:"300px",padding:"12px 8px",fontSize:"18px",borderRadius:"5px",outline:"none",backgroundColor:"hsla(0,0%,100%,0.9)"}}}));function et(){var e=Ze(),t=Object(l.c)((function(e){return e.docState.status})),a=Object(i.useState)(!1),n=Object(R.a)(a,2),r=n[0],o=n[1],s=Object(i.useState)(!1),u=Object(R.a)(s,2),d=u[0],h=u[1],m=Object(i.useRef)(null),f=window.location.href.split("?")[0],v=Object(i.useCallback)((function(){var e;null===(e=m.current)||void 0===e||e.select()}),[]),p=Object(i.useCallback)((function(){h(!0)}),[]),b=Object(i.useCallback)((function(){o(!0)}),[]),g=Object(i.useCallback)((function(){o(!1)}),[]);return c.a.createElement("div",{className:Qe("box")},c.a.createElement(ie.a,{className:Qe("button"),size:"small",color:"primary",variant:"contained",startIcon:c.a.createElement(ue.a,null),onClick:b,disabled:t===Me.Disconnect},"Share"),c.a.createElement(we,{open:r,onClose:g,className:e.dialog},c.a.createElement(Oe,{onClose:g},"Share Code"),c.a.createElement(je,{dividers:!0},c.a.createElement(oe.a,{my:3},c.a.createElement(W.a,null,"Anyone can access the code in real time through this URL.")),c.a.createElement(oe.a,{my:1},c.a.createElement(Ee.a,null,"Share this URL")),c.a.createElement(oe.a,{display:"flex"},c.a.createElement("input",{readOnly:!0,ref:m,className:e.input,value:f,onFocus:v}),c.a.createElement(ae.CopyToClipboard,{text:f,onCopy:p},c.a.createElement(ce.a,{color:"primary"},c.a.createElement(de.a,null))),c.a.createElement(Ne,{show:d,onFadeout:function(){return h(!1)}},c.a.createElement("p",null,"Copy!")))),c.a.createElement(ke,null,c.a.createElement(ie.a,{onClick:g,color:"primary",variant:"contained",autoFocus:!0},"Close"))))}var tt=a(139),at=a.n(tt),nt=a(138),rt=a.n(nt),ot=Object(z.a)((function(){return Object(T.a)({root:{width:"380px"},title:{backgroundColor:"hsla(0,0%,100%,0.1)","& > *":{fontWeight:"bold"}}})}));function it(e){var t=e.title,a=e.subTitle,n=e.content,r=ot();return c.a.createElement("div",{className:r.root},c.a.createElement(oe.a,{px:2,py:1.5,className:r.title},c.a.createElement(W.a,{variant:"subtitle1"},t)),c.a.createElement(oe.a,{px:2,p:1},c.a.createElement(oe.a,{py:1},c.a.createElement(W.a,{variant:"body1"},a)),c.a.createElement(oe.a,{pb:2.5},c.a.createElement(W.a,{variant:"body2"},n))))}function ct(e){var t=Object(i.useState)(),a=Object(R.a)(t,2),n=a[0],r=a[1],o=e.hasLocalChanges,s=Object(i.useCallback)((function(e){r(e.currentTarget)}),[]),u=Object(i.useCallback)((function(){r(void 0)}),[]);return c.a.createElement(c.a.Fragment,null,c.a.createElement(ie.a,{"aria-label":"doc-status",color:"secondary",startIcon:c.a.createElement(rt.a,null),onClick:s},"Working offline"),c.a.createElement(K,{anchorEl:n,onClose:u,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"}},c.a.createElement(it,{title:o?"There are changes that couldn't be sent to Server":"All Changes saved to Server",subTitle:"This document is ready for offline use",content:"Looks like you're offline. Changes will save to this memory now, and save to Server once reconnected."})))}function st(){var e=Object(i.useState)(),t=Object(R.a)(e,2),a=t[0],n=t[1],r=Object(i.useCallback)((function(e){n(e.currentTarget)}),[]),o=Object(i.useCallback)((function(){n(void 0)}),[]);return c.a.createElement(c.a.Fragment,null,c.a.createElement(ie.a,{"aria-label":"doc-status",color:"secondary",onClick:r},c.a.createElement(at.a,null)),c.a.createElement(K,{anchorEl:a,onClose:o,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"}},c.a.createElement(it,{title:"All Changes saved to Server",subTitle:"This document is ready for offline use",content:"You can edit this document without an internet connection. Changes will save to Server once reconnected."})))}function ut(){var e=Object(l.c)((function(e){return e.docState.status})),t=Object(l.c)((function(e){return!!e.docState.doc&&e.docState.doc.hasLocalChanges()}));return e===Me.Connect?c.a.createElement(st,null):c.a.createElement(ct,{hasLocalChanges:t})}var lt=Object(z.a)((function(e){return Object(T.a)({root:{flexGrow:1},appBar:{backgroundColor:"black"},grow:{flexGrow:1},title:{fontWeight:"bold",color:e.palette.primary.main,marginRight:e.spacing(1)},items:{display:"flex","& > *":{margin:e.spacing(1)}}})}));function dt(){var e=lt();return c.a.createElement("div",{className:e.root},c.a.createElement(L.a,{position:"static",className:e.appBar},c.a.createElement(I.a,null,c.a.createElement(W.a,{variant:"h6",className:e.title},"CodePair"),c.a.createElement(ut,null),c.a.createElement("div",{className:e.grow}),c.a.createElement("div",{className:e.items},c.a.createElement(et,null),c.a.createElement(te,null)))))}var ht=Object(i.memo)(dt),mt=a(296),ft=a(286),vt=a(285),pt=a(140),bt=a.n(pt),gt=a(304),yt=Object(z.a)((function(e){return Object(T.a)({root:{minWidth:"320px",borderRadius:"4px"},header:{borderBottom:"1px solid ".concat(e.palette.text.disabled)},title:{padding:"12px 16px"},list:{padding:"8px 18px 18px 18px",lineHeight:"19px"},item:{display:"flex",justifyContent:"space-between",fontSize:"15px",marginTop:"12px"},itemTitle:{whiteSpace:"nowrap",display:"flex",alignItems:"center"},itemInfo:{minWidth:140,paddingLeft:"12px",borderRadius:"4px",textAlign:"left"}})})),Et=function(){var e=Object(l.b)(),t=yt(),a=Object(l.c)((function(e){return e.settingState.menu}));function s(t){return function(a){e(t(a.target.value))}}var u=Object(i.useCallback)((function(t,a){e(S(a))}),[e,S]);return c.a.createElement("div",{className:t.root},c.a.createElement(oe.a,null,c.a.createElement("header",{className:t.header},c.a.createElement(W.a,{className:t.title,variant:"h6"},"Settings"))),c.a.createElement("div",{className:t.list},c.a.createElement("div",{className:t.item},c.a.createElement("div",{className:t.itemTitle},"Dark Mode"),c.a.createElement(vt.a,{className:t.itemInfo},c.a.createElement(gt.a,{checked:a.theme===n.Dark,onChange:u}))),c.a.createElement("div",{className:t.item},c.a.createElement("div",{className:t.itemTitle},"Key Binding"),c.a.createElement(vt.a,{className:t.itemInfo},c.a.createElement(mt.a,{value:a.codeKeyMap,onChange:s(D),displayEmpty:!0},Object.entries(r).map((function(e){var t=Object(R.a)(e,2),a=t[0],n=t[1];return c.a.createElement(ft.a,{value:n,key:n},a)}))))),c.a.createElement("div",{className:t.item},c.a.createElement("div",{className:t.itemTitle},"Tab Size"),c.a.createElement(vt.a,{className:t.itemInfo},c.a.createElement(mt.a,{value:a.tabSize,onChange:s(M),displayEmpty:!0},Object.entries(o).map((function(e){var t=Object(R.a)(e,2),a=t[0],n=t[1];return c.a.createElement(ft.a,{value:n,key:a},"".concat(n," spaces"))})))))))},Ot=Object(z.a)((function(e){return Object(T.a)({root:{padding:"6px",position:"relative"},formControl:{minWidth:140,border:"1px solid ".concat(e.palette.grey[800]),borderRadius:"4px"},selectEmpty:{paddingLeft:"12px"},rightButtonControl:{float:"right"},rightButton:{padding:"7px"}})}));function jt(){var e=Ot(),t=Object(l.b)(),a=Object(l.c)((function(e){return e.docState.doc})),n=Object(l.c)((function(e){return e.docState.mode})),r=Object(i.useState)(),o=Object(R.a)(r,2),s=o[0],u=o[1];Object(i.useEffect)((function(){if(!a)return function(){};var e=a.subscribe((function(e){"remote-change"===e.type&&t(Ge(a.getRoot().mode||De.Markdown))}));return function(){e()}}),[a]);var d=Object(i.useCallback)((function(e){if(a){var n=e.target.value;a.update((function(e){e.mode=n})),t(Ge(n))}}),[a,t]),h=Object(i.useCallback)((function(e){u(e.currentTarget)}),[]),m=Object(i.useCallback)((function(){u(void 0)}),[]);return c.a.createElement("div",{className:e.root},c.a.createElement(vt.a,{className:e.formControl},c.a.createElement(P.a,{title:"Syntax",arrow:!0},c.a.createElement(mt.a,{name:"codeMode",value:n,onChange:d,className:e.selectEmpty,disableUnderline:!0,displayEmpty:!0},Object.entries(De).map((function(e){var t=Object(R.a)(e,2),a=t[0],n=t[1];return c.a.createElement(ft.a,{value:n,key:n},a)}))))),c.a.createElement("div",{className:e.rightButtonControl},c.a.createElement(P.a,{className:e.rightButton,title:"Settings",arrow:!0},c.a.createElement(ce.a,{"aria-label":"settings",onClick:h},c.a.createElement(bt.a,{fontSize:"small"})))),c.a.createElement(K,{anchorEl:s,onClose:m},c.a.createElement(Et,null)))}var kt,xt=a(299),wt=a(297),Ct=a(289),St=a(40),Dt=a(141),Mt=a(142),Nt=a.n(Mt);!function(e){e.Deactivated="deactivated",e.Activated="activated"}(kt||(kt={}));var zt,Tt,Lt=function(){function e(t,a){Object(E.a)(this,e),this.id=void 0,this.username=void 0,this.color=void 0,this.height=void 0,this.marker=void 0,this.lineMarker=void 0,this.status=void 0,this.nameRemoveTimeMap=void 0,this.nameAnimationDelay=void 0,this.nameAnimationDuration=void 0,this.nameRemoveTime=void 0,this.id=t,this.username=a.username,this.color=a.color,this.height=0,this.status=kt.Deactivated,this.nameRemoveTimeMap=new Map,this.nameAnimationDelay=1,this.nameAnimationDuration=.2,this.nameRemoveTime=1e3*(this.nameAnimationDuration+this.nameAnimationDelay)}return Object(O.a)(e,[{key:"updateCursor",value:function(e,t){this.removeCursor(),this.status=kt.Activated;var a=e.cursorCoords(t),n=document.createElement("span");this.height=a.bottom-a.top,n.classList.add("codePair-cursor"),n.style.borderLeftColor=this.color,n.style.height="".concat(this.height,"px"),this.marker=e.setBookmark(t,{widget:n,insertLeft:!0}),this.showCursorNameReserve(n)}},{key:"updateLine",value:function(e,t,a){this.removeLine(),this.status=kt.Activated,this.lineMarker=e.getDoc().markText(t,a,{css:"background-color : ".concat(this.color,"; opacity:0.7")})}},{key:"showCursorNameReserve",value:function(e){var t=this,a=document.createElement("span");a.classList.add("codePair-name"),e.addEventListener("mouseenter",(function(){t.nameRemoveTimeMap.has(t.id)&&clearTimeout(t.nameRemoveTimeMap.get(t.id)),a.textContent=t.username,a.style.top="-".concat(t.height,"px"),a.style.backgroundColor=t.color,a.style.color=Nt()(t.color,!0),a.classList.remove("text-remove"),e.appendChild(a)})),e.addEventListener("mouseleave",(function(){a.classList.add("text-remove"),a.style.animationDuration="".concat(t.nameAnimationDuration,"s"),a.style.animationDelay="".concat(t.nameAnimationDelay,"s"),t.removeNameReserve(a)}))}},{key:"removeNameReserve",value:function(e){var t=this,a=setTimeout((function(){e.parentNode.removeChild(e),t.nameRemoveTimeMap.delete(t.id)}),this.nameRemoveTime);this.nameRemoveTimeMap.set(this.id,a)}},{key:"removeCursor",value:function(){this.marker&&(this.marker.clear(),this.marker=void 0)}},{key:"removeLine",value:function(){this.lineMarker&&(this.lineMarker.clear(),this.lineMarker=void 0)}},{key:"clear",value:function(){this.removeCursor(),this.removeLine()}},{key:"isActive",value:function(){return this.status===kt.Activated}}]),e}();a(196),a(197),a(199),a(200),a(205),a(206),a(208),a(209),a(211),a(212),a(213),a(214),a(215),a(216),a(218),a(219),a(220),a(221);function It(e){var t=e.forwardedRef,a=Object(l.c)((function(e){return e.docState.doc})),r=Object(l.c)((function(e){return e.docState.mode})),o=Object(l.c)((function(e){return e.docState.client})),s=Object(l.c)((function(e){return e.peerState.peers})),u=Object(l.c)((function(e){return e.settingState.menu})),d=Object(i.useRef)(new Map),h=Object(i.useCallback)((function(e,t){d.current.set(e,new Lt(e,t))}),[]),m=Object(i.useCallback)((function(e){d.current.has(e)&&(d.current.get(e).clear(),d.current.delete(e))}),[]);return Object(i.useEffect)((function(){for(var e=0,t=Object.entries(s);e<t.length;e++){var a=Object(R.a)(t[e],2),n=a[0],r=a[1];d.current.has(n)&&r.status===V.Disconnected?m(n):d.current.has(n)||r.status!==V.Connected||h(n,r.metadata)}}),[s]),o&&a?c.a.createElement(Dt.UnControlled,{className:"CodeMirror",options:{mode:r,theme:u.theme===n.Dark?"monokai":"xq-light",keyMap:u.codeKeyMap,tabSize:Number(u.tabSize),lineNumbers:!0,lineWrapping:!0,autoCloseTags:!0,autoCloseBrackets:!0},editorDidMount:function(e){t.current=e,e.focus();var n=function(t,a){var n=d.current.get(t);null===n||void 0===n||n.updateCursor(e,a)};a.subscribe((function(t){if("remote-change"===t.type){var a,r=Object(St.a)(t.value);try{for(r.s();!(a=r.n()).done;){var i=a.value.change.getID().getActorID();if(i!==o.getID()){if(!d.current.has(i))return;if(d.current.get(i).isActive())return;n(i,e.posFromIndex(0))}}}catch(c){r.e(c)}finally{r.f()}}}));var r=a.getRoot();r.content.onChanges((function(t){t.forEach((function(t){var a=t.actor,r=t.from,i=t.to;if("content"===t.type){var c=t.content||"";if(a!==o.getID()){var s=e.posFromIndex(r),u=e.posFromIndex(i);e.replaceRange(c,s,u,"yorkie")}}else if("selection"===t.type&&a!==o.getID()){var l=e.posFromIndex(r),h=e.posFromIndex(i);if(n(a,h),r>i){var m=[l,h];h=m[0],l=m[1]}!function(t,a,n){var r=d.current.get(t);null===r||void 0===r||r.updateLine(e,a,n)}(a,l,h)}}))})),e.setValue(r.content.getValue())},onSelection:function(e,t){if(t.origin){var n=e.indexFromPos(t.ranges[0].anchor),r=e.indexFromPos(t.ranges[0].head);a.update((function(e){e.content.select(n,r)}))}},onBeforeChange:function(e,t){if("yorkie"!==t.origin&&"setValue"!==t.origin){var n=e.indexFromPos(t.from),r=e.indexFromPos(t.to),o=t.text.join("\n");a.update((function(e){e.content.edit(n,r,o)}))}}}):null}!function(e){e.Red="#d8453c",e.Blue="#19abbf",e.Green="#699e3d",e.White="#cccccc",e.Yellow="#f3b328",e.Black="#444"}(zt||(zt={})),function(e){e[e.None=0]="None",e[e.Line=1]="Line",e[e.Eraser=2]="Eraser",e[e.Rect=3]="Rect",e[e.Selector=4]="Selector"}(Tt||(Tt={}));var Wt={isOpen:!1,color:zt.Red,tool:Tt.None},Rt=Object(y.c)({name:"board",initialState:Wt,reducers:{toggleBoard:function(e){e.isOpen=!e.isOpen},setTool:function(e,t){e.tool=t.payload},setColor:function(e,t){e.color=t.payload}}}),Bt=Rt.actions,At=(Bt.toggleBoard,Bt.setTool),Pt=Bt.setColor,Ft=Rt.reducer,Ut=a(34),Ht=a(32),Kt=function(){function e(t){Object(E.a)(this,e),this.name=void 0,this.callbacks=void 0,this.name=t,this.callbacks=[]}return Object(O.a)(e,[{key:"on",value:function(e){this.callbacks.push(e)}},{key:"off",value:function(e){var t=this.callbacks.findIndex((function(t){return t===e}));this.callbacks.splice(t,1)}},{key:"toString",value:function(){return this.name}}]),e}(),Vt=function(){function e(){Object(E.a)(this,e),this.events=void 0,this.events={}}return Object(O.a)(e,[{key:"emit",value:function(e){for(var t=arguments.length,a=new Array(t>1?t-1:0),n=1;n<t;n++)a[n-1]=arguments[n];this.events[e]&&this.events[e].callbacks.forEach((function(e){e.apply(void 0,a)}))}},{key:"addEventListener",value:function(e,t){this.events[e]||(this.events[e]=new Kt(e)),this.events[e].on(t)}},{key:"removeEventListener",value:function(e,t){t?this.events[e].off(t):delete this.events[e]}}]),e}(),Yt=function(){function e(t){Object(E.a)(this,e),this.canvas=void 0,this.context=void 0,this.width=0,this.height=0,this.canvas=t,this.context=t.getContext("2d"),this.context.lineWidth=3,this.context.lineCap="round",this.canvas.className="canvas",this.setWidth(t.width),this.setHeight(t.height)}return Object(O.a)(e,[{key:"getCanvas",value:function(){return this.canvas}},{key:"getContext",value:function(){return this.context}},{key:"getWidth",value:function(){return this.width}},{key:"getHeight",value:function(){return this.height}},{key:"setWidth",value:function(e,t){this.width=e,this.canvas.width=t?e*t:e,this.canvas.style.width="".concat(e,"px")}},{key:"setHeight",value:function(e,t){this.height=e,this.canvas.height=t?e*t:e,this.canvas.style.height="".concat(e,"px")}},{key:"setSize",value:function(e,t,a){this.setWidth(e,a),this.setHeight(t,a)}},{key:"clear",value:function(){this.getContext().clearRect(0,0,this.getWidth(),this.getHeight())}},{key:"resize",value:function(){var e=window.devicePixelRatio;e?(this.setSize(this.width,this.height,e),this.context.scale(e,e)):this.setSize(this.width,this.height)}}]),e}();function _t(e,t){e.save(),e.beginPath(),e.strokeStyle="eraser"===t.type?"#ff7043":t.color;var a,n=!1,r=Object(St.a)(t.points);try{for(r.s();!(a=r.n()).done;){var o=a.value;!1===n?(n=!0,e.moveTo(o.x,o.y)):e.lineTo(o.x,o.y)}}catch(i){r.e(i)}finally{r.f()}e.stroke(),e.closePath(),e.restore()}function Gt(e){return{y:e.y+8,x:e.x+6}}function Xt(e,t){var a=e.x-t.x,n=e.y-t.y;return a*a+n*n}function Jt(e,t,a){var n=t.x,r=t.y,o=a.x-n,i=a.y-r;if(0!==o||0!==i){var c=((e.x-n)*o+(e.y-r)*i)/(o*o+i*i);c>1?(n=a.x,r=a.y):c>0&&(n+=o*c,r+=i*c)}return(o=e.x-n)*o+(i=e.y-r)*i}function $t(e,t,a,n,r){for(var o=n,i=0,c=t+1;c<a;c+=1){var s=Jt(e[c],e[t],e[a]);s>o&&(i=c,o=s)}o>n&&(t+1<i&&$t(e,t,i,n,r),r.push(e[i]),i+1<a&&$t(e,i,a,n,r))}function qt(e,t){var a=e.length-1,n=[];return n.push(e[0]),$t(e,0,a,t,n),n.push(e[a]),n}function Qt(e,t){for(var a=e[0],n=a,r=[n],o=1,i=e.length;o<i;o+=1)Xt(a=e[o],n)>t&&(r.push(a),n=a);return n!==a&&r.push(a),r}function Zt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return qt(Qt(e,t),t)}function ea(e,t,a,n){var r,o,i={x:0,y:0,onLine1:!1,onLine2:!1},c=(n.y-a.y)*(t.x-e.x)-(n.x-a.x)*(t.y-e.y);if(0===c)return i;r=e.y-a.y,o=e.x-a.x;var s=(n.x-a.x)*r-(n.y-a.y)*o,u=(t.x-e.x)*r-(t.y-e.y)*o;return r=s/c,o=u/c,i.x=e.x+r*(t.x-e.x),i.y=e.y+r*(t.y-e.y),r>0&&r<1&&(i.onLine1=!0),o>0&&o<1&&(i.onLine2=!0),i}function ta(e){return{y:e.y,x:e.x,width:e.width,height:e.height}}function aa(e,t){var a=e.y+e.height,n=e.x+e.width;return!(e.height>0?a<t.y:a>t.y)&&(!(e.y>t.y)&&(!(e.height>0?n<t.x:n>t.x)&&!(e.x>t.x)))}function na(e){return"rect"===e.type}function ra(e,t){e.strokeRect(t.box.x,t.box.y,t.box.width,t.box.height)}var oa,ia,ca=a(24),sa=a(147),ua=function(){function e(){Object(E.a)(this,e),this.type=void 0,this.update=void 0}return Object(O.a)(e,[{key:"getElementByID",value:function(e,t){try{return e.shapes.getElementByID(t)}catch(a){return}}},{key:"deleteByID",value:function(e,t){try{return e.shapes.deleteByID(t)}catch(a){return}}}]),e}(),la=[],da=function(){"function"===typeof ia&&(ia(la),la=[])};function ha(e){e?da():oa=setTimeout((function(){da(),ha(!1)}),50)}function ma(e,t){la.push(e),void 0===ia&&(ia=t,ha(!1))}function fa(){clearTimeout(oa),"function"===typeof ia&&ha(!0),ia=void 0}var va,pa=function(e){Object(Ut.a)(a,e);var t=Object(Ht.a)(a);function a(e,n){var r;return Object(E.a)(this,a),(r=t.call(this)).type=Tt.Line,r.update=void 0,r.board=void 0,r.createID=void 0,r.update=e,r.board=n,r}return Object(O.a)(a,[{key:"mousedown",value:function(e,t){var a;this.update((function(n){var r=function(e,t){return{type:"line",color:t.color,points:[e]}}(e,t);n.shapes.push(r);var o=n.shapes.getLast();a=o.getID()})),this.createID=a}},{key:"mousemove",value:function(e){var t=this;ma(e,(function(e){var a=Zt(e);e.length<2||t.update((function(e){var n,r=t.getElementByID(e,t.createID);r&&((n=r.points).push.apply(n,Object(sa.a)(a)),t.board.drawAll(e.shapes))}))}))}},{key:"mouseup",value:function(){this.flushTask()}},{key:"flushTask",value:function(){var e=this;fa(),this.update((function(t){if(e.createID){var a=e.getElementByID(t,e.createID);a&&(a.points.length<2&&e.deleteByID(t,e.createID),e.board.drawAll(t.shapes))}}))}}]),a}(ua),ba=function(e){Object(Ut.a)(a,e);var t=Object(Ht.a)(a);function a(e,n){var r;return Object(E.a)(this,a),(r=t.call(this)).type=Tt.Rect,r.update=void 0,r.board=void 0,r.createID=void 0,r.update=e,r.board=n,r}return Object(O.a)(a,[{key:"mousedown",value:function(e){var t;this.update((function(a){var n=function(e){return{type:"rect",box:{x:e.x,y:e.y,width:0,height:0},points:[{x:e.x,y:e.y}]}}(e);a.shapes.push(n);var r=a.shapes.getLast();t=r.getID()})),this.createID=t}},{key:"mousemove",value:function(e){var t=this;ma(e,(function(e){e.length<2||t.update((function(a){var n=e[e.length-1],r=t.getElementByID(a,t.createID),o=function(e,t){var a=ta(e.box),n=e.points[0],r=t.x-n.x,o=t.y-n.y,i=Math.abs(r),c=Math.abs(o);return a.x=n.x-(r>0?0:-r),a.y=n.y-(o>0?0:-o),a.width=i,a.height=c,a}(r,n);r.box=o,t.board.drawAll(a.shapes)}))}))}},{key:"mouseup",value:function(){this.flushTask()}},{key:"flushTask",value:function(){fa()}}]),a}(ua),ga=function(e){Object(Ut.a)(a,e);var t=Object(Ht.a)(a);function a(e,n){var r;return Object(E.a)(this,a),(r=t.call(this)).type=Tt.Eraser,r.update=void 0,r.board=void 0,r.createID=void 0,r.eraserBoxSize=24,r.update=e,r.board=n,r}return Object(O.a)(a,[{key:"mousedown",value:function(e){var t;this.update((function(a){var n=function(e){return{type:"eraser",points:[e]}}(e);a.shapes.push(n);var r=a.shapes.getLast();t=r.getID()})),this.createID=t}},{key:"mousemove",value:function(e){var t=this;ma(e,(function(e){var a=Zt(e);e.length<2||t.update((function(e){var n=Gt(a[0]),r=Gt(a[a.length-1]),o=t.getElementByID(e,t.createID);if(o){var i=function(a,n){var r,o=Object(St.a)(e.shapes);try{for(o.s();!(r=o.n()).done;){var i=r.value;if("eraser"!==i.type)if(na(i))aa(i.box,n)&&t.deleteByID(e,i.getID());else for(var c=1;c<i.points.length;c+=1){var s=i.points[c-1],u=i.points[c];if(aa(t.eraserBox(n),u)){t.deleteByID(e,i.getID());break}if(aa(t.eraserBox(a),u)){t.deleteByID(e,i.getID());break}var l=ea(a,n,s,u);if(l.onLine1&&l.onLine2){t.deleteByID(e,i.getID());break}}}}catch(d){o.e(d)}finally{o.f()}};if(o.points.length>0)i(o.points[o.points.length-1],n);i(n,r),o.points=[n,r],t.board.drawAll(e.shapes)}}))}))}},{key:"mouseup",value:function(){this.flushTask()}},{key:"flushTask",value:function(){var e=this;fa(),this.update((function(t){e.createID&&(e.deleteByID(t,e.createID),e.board.drawAll(t.shapes))}))}},{key:"eraserBox",value:function(e){var t=e.x-this.eraserBoxSize/2;return{y:e.y-this.eraserBoxSize/2,x:t,width:this.eraserBoxSize,height:this.eraserBoxSize}}}]),a}(ua),ya=a(106),Ea=function(e){Object(Ut.a)(a,e);var t=Object(Ht.a)(a);function a(e,n){var r;return Object(E.a)(this,a),(r=t.call(this)).type=Tt.Selector,r.update=void 0,r.board=void 0,r.selectedShape=void 0,r.update=e,r.board=n,r}return Object(O.a)(a,[{key:"mousedown",value:function(e){var t=this.findTarget(e);this.selectedShape=t?{shape:t,point:e}:void 0}},{key:"mousemove",value:function(e){var t=this;ma(e,(function(e){e.length<2||t.update((function(a){if(!t.isEmptySelectedShape()){var n=t.getElementByID(a,t.selectedShape.shape.getID());if(n&&"rect"===n.type){if(na(n)){var r=e[e.length-1],o=r.y-t.selectedShape.point.y,i=r.x-t.selectedShape.point.x;t.selectedShape.point=r,n.box=Object(ya.a)(Object(ya.a)({},ta(n.box)),{},{y:n.box.y+o,x:n.box.x+i}),n.points[0]={y:n.points[0].y+o,x:n.points[0].x+i}}t.board.drawAll(a.shapes)}}}))}))}},{key:"mouseup",value:function(){this.flushTask()}},{key:"flushTask",value:function(){fa()}},{key:"isEmptySelectedShape",value:function(){return!this.selectedShape}},{key:"findTarget",value:function(e){var t;return this.update((function(a){var n,r=Object(St.a)(a.shapes);try{for(r.s();!(n=r.n()).done;){var o=n.value;if("rect"===o.type&&aa(o.box,e))return void(t=o)}}catch(i){r.e(i)}finally{r.f()}})),t}}]),a}(ua),Oa=function(e){Object(Ut.a)(a,e);var t=Object(Ht.a)(a);function a(e,n){var r;return Object(E.a)(this,a),(r=t.call(this)).type=Tt.None,r.update=void 0,r.board=void 0,r.update=e,r.board=n,r}return Object(O.a)(a,[{key:"mousedown",value:function(){}},{key:"mousemove",value:function(){}},{key:"mouseup",value:function(){}},{key:"flushTask",value:function(){}}]),a}(ua);!function(e){e[e.Drag=0]="Drag",e[e.Stop=1]="Stop"}(va||(va={}));var ja=function(e){Object(Ut.a)(a,e);var t=Object(Ht.a)(a);function a(e,n){var r;return Object(E.a)(this,a),(r=t.call(this)).offsetY=0,r.offsetX=0,r.color=zt.Black,r.dragStatus=va.Stop,r.lowerWrapper=void 0,r.upperWrapper=void 0,r.update=void 0,r.worker=void 0,r.lowerWrapper=new Yt(e),r.upperWrapper=r.createUpperWrapper(),r.update=n,r.initialize(),r}return Object(O.a)(a,[{key:"initialize",value:function(){this.initializeSize(),this.initializeOffset(),this.emit=this.emit.bind(this),this.drawAll=this.drawAll.bind(this),this.onMouseUp=this.onMouseUp.bind(this),this.onMouseDown=this.onMouseDown.bind(this),this.onMouseMove=this.onMouseMove.bind(this),this.worker=new Oa(this.update,this),Object(ca.c)(this.upperWrapper.getCanvas(),ca.a,"mouseup",this.onMouseUp),Object(ca.c)(this.upperWrapper.getCanvas(),ca.a,"mouseout",this.onMouseUp),Object(ca.c)(this.upperWrapper.getCanvas(),ca.a,"mousedown",this.onMouseDown),this.addEventListener("renderAll",this.drawAll)}},{key:"destroy",value:function(){Object(ca.c)(this.upperWrapper.getCanvas(),ca.b,"mouseup",this.onMouseUp),Object(ca.c)(this.upperWrapper.getCanvas(),ca.b,"mouseout",this.onMouseUp),Object(ca.c)(this.upperWrapper.getCanvas(),ca.b,"mousedown",this.onMouseDown),this.destroyUpperCanvas(),this.removeEventListener("renderAll")}},{key:"initializeOffset",value:function(){var e=this.lowerWrapper.getCanvas().getBoundingClientRect(),t=e.y,a=e.x;this.offsetY=t,this.offsetX=a}},{key:"initializeSize",value:function(){this.lowerWrapper.resize(),this.upperWrapper.resize()}},{key:"createUpperWrapper",value:function(){var e,t=document.createElement("canvas"),a=new Yt(t);return a.setWidth(this.lowerWrapper.getWidth()),a.setHeight(this.lowerWrapper.getHeight()),null===(e=this.lowerWrapper.getCanvas().parentNode)||void 0===e||e.appendChild(t),a}},{key:"destroyUpperCanvas",value:function(){var e,t,a=null===(e=this.upperWrapper)||void 0===e?void 0:e.getCanvas();a&&(null===(t=a.parentNode)||void 0===t||t.removeChild(a))}},{key:"setColor",value:function(e){this.color=e}},{key:"setWidth",value:function(e){this.lowerWrapper.setWidth(e),this.upperWrapper.setWidth(e),this.resize()}},{key:"setHeight",value:function(e){this.lowerWrapper.setHeight(e),this.upperWrapper.setHeight(e),this.resize()}},{key:"resize",value:function(){this.lowerWrapper.resize(),this.upperWrapper.resize()}},{key:"setTool",value:function(e){if(this.setMouseClass(e),this.worker.type!==e)if(this.worker.flushTask(),e===Tt.Line)this.worker=new pa(this.update,this);else if(e===Tt.Eraser)this.worker=new ga(this.update,this);else if(e===Tt.Rect)this.worker=new ba(this.update,this);else if(e===Tt.Selector)this.worker=new Ea(this.update,this);else{if(e!==Tt.None)throw new Error("Undefined tool: ".concat(e));this.worker=new Oa(this.update,this)}}},{key:"setMouseClass",value:function(e){this.upperWrapper.getCanvas().className="canvas canvas-upper",e===Tt.Line||e===Tt.Rect?this.upperWrapper.getCanvas().classList.add("crosshair","canvas-touch-none"):e===Tt.Eraser?this.upperWrapper.getCanvas().classList.add("eraser","canvas-touch-none"):e===Tt.Selector&&this.upperWrapper.getCanvas().classList.add("canvas-touch-none")}},{key:"getPointFromTouchyEvent",value:function(e){var t,a;return window.TouchEvent&&e instanceof TouchEvent?(t=e.touches[0].clientY,a=e.touches[0].clientX):(t=e.clientY,a=e.clientX),t+=window.scrollY,a+=window.scrollX,{y:t-this.offsetY,x:a-this.offsetX}}},{key:"onMouseDown",value:function(e){Object(ca.c)(this.upperWrapper.getCanvas(),ca.a,"mousemove",this.onMouseMove),this.dragStatus=va.Drag;var t=this.getPointFromTouchyEvent(e);this.worker.mousedown(t,{color:this.color})}},{key:"onMouseMove",value:function(e){var t=this.getPointFromTouchyEvent(e);this.isOutside(t)?this.onMouseUp():this.dragStatus!==va.Stop&&this.worker.mousemove(t)}},{key:"onMouseUp",value:function(){Object(ca.c)(this.upperWrapper.getCanvas(),ca.b,"mousemove",this.onMouseMove),this.dragStatus=va.Stop,this.worker.mouseup(),this.emit("mouseup")}},{key:"isOutside",value:function(e){return e.y<0||e.x<0||e.y>this.lowerWrapper.getHeight()||e.x>this.lowerWrapper.getWidth()}},{key:"drawAll",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.lowerWrapper;this.clear(t);var a,n=Object(St.a)(e);try{for(n.s();!(a=n.n()).done;){var r=a.value;"line"===r.type||"eraser"===r.type?_t(t.getContext(),r):"rect"===r.type&&ra(t.getContext(),r)}}catch(o){n.e(o)}finally{n.f()}}},{key:"clear",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.lowerWrapper;e.clear()}}]),a}(Vt);a(222);function ka(e){var t=e.width,a=e.height,n=Object(i.useRef)(null),r=Object(i.useRef)(null),o=Object(l.b)(),s=Object(l.c)((function(e){return e.docState.doc})),u=Object(l.c)((function(e){return e.boardState.tool})),d=Object(l.c)((function(e){return e.boardState.color}));return Object(i.useEffect)((function(){if(!n.current)return function(){};var e=new ja(n.current,s.update.bind(s));return r.current=e,function(){e.destroy()}}),[s]),Object(i.useEffect)((function(){if(!s)return function(){};var e=s.subscribe((function(e){var t;"remote-change"===e.type&&(null===(t=r.current)||void 0===t||t.drawAll(s.getRoot().shapes))}));return function(){e()}}),[s]),Object(i.useEffect)((function(){var e,t=function(){u===Tt.Rect&&o(At(Tt.Selector))};return null===(e=r.current)||void 0===e||e.addEventListener("mouseup",t),function(){var e;null===(e=r.current)||void 0===e||e.removeEventListener("mouseup",t)}}),[s,u]),Object(i.useEffect)((function(){var e,o,i;n.current&&(null===(e=r.current)||void 0===e||e.setWidth(t),null===(o=r.current)||void 0===o||o.setHeight(a),null===(i=r.current)||void 0===i||i.drawAll(s.getRoot().shapes))}),[s,t,a]),Object(i.useEffect)((function(){var e;null===(e=r.current)||void 0===e||e.setTool(u)}),[s,u]),Object(i.useEffect)((function(){var e;null===(e=r.current)||void 0===e||e.setColor(d)}),[s,d]),c.a.createElement("canvas",{ref:n})}var xa=a(143),wa=a.n(xa),Ca=a(288),Sa=a(91);function Da(e){var t=e.fontSize;return c.a.createElement(Sa.a,{fontSize:t},c.a.createElement("svg",{version:"1.1",id:"Layer_1",x:"0px",y:"0px",viewBox:"0 0 480.001 480.001"},c.a.createElement("g",null,c.a.createElement("g",null,c.a.createElement("path",{d:"M333.142,350.846c0.115-0.115,0.215-0.239,0.323-0.357l129.681-129.706c10.878-10.878,16.864-25.368,16.855-40.8 c-0.01-15.409-5.999-29.865-16.854-40.694l-97.844-97.874c-10.853-10.845-25.326-16.817-40.75-16.817 c-15.426,0-29.895,5.974-40.741,16.82L16.855,308.329C5.974,319.21-0.012,333.713,0,349.168 c0.013,15.425,6.002,29.884,16.854,40.7l62.592,62.606c0.061,0.061,0.127,0.112,0.188,0.171c0.174,0.165,0.349,0.331,0.534,0.483 c0.082,0.067,0.171,0.126,0.255,0.19c0.175,0.135,0.349,0.271,0.532,0.395c0.07,0.047,0.145,0.085,0.215,0.13 c0.205,0.131,0.412,0.26,0.627,0.376c0.051,0.026,0.103,0.048,0.154,0.074c0.239,0.123,0.482,0.241,0.732,0.346 c0.033,0.014,0.067,0.024,0.101,0.037c0.269,0.108,0.54,0.208,0.819,0.293c0.034,0.011,0.07,0.017,0.104,0.027 c0.276,0.081,0.556,0.154,0.841,0.211c0.082,0.017,0.165,0.023,0.247,0.038c0.239,0.041,0.479,0.084,0.724,0.107 c0.33,0.033,0.663,0.051,0.998,0.051h137.91h159.308c5.522,0,10-4.478,10-10c0-5.522-4.478-10-10-10H248.566l84.22-84.236 C332.904,351.06,333.027,350.96,333.142,350.846z M220.285,435.404H90.66l-59.675-59.689 c-7.076-7.054-10.977-16.487-10.985-26.563c-0.008-10.106,3.897-19.582,10.996-26.681l129.825-129.803l151.091,151.091 L220.285,435.404z M174.965,178.527L297.953,55.56c7.069-7.069,16.516-10.963,26.6-10.963c10.085,0,19.536,3.895,26.609,10.962 l97.85,97.88c7.08,7.063,10.982,16.493,10.989,26.557c0.006,10.085-3.899,19.547-10.998,26.645l-122.95,122.974L174.965,178.527z"})))))}function Ma(e){var t=e.fontSize;return c.a.createElement(Sa.a,{fontSize:t},c.a.createElement("svg",{viewBox:"-36 0 392 392.40392",xmlns:"http://www.w3.org/2000/svg"},c.a.createElement("path",{d:"m43 355.03125c.492188 3.949219 3.273438 7.230469 7.085938 8.355469 3.816406 1.128906 7.933593-.109375 10.492187-3.152344l68.5-81.507813 72.972656 109.230469c3.058594 4.585938 9.25 5.828125 13.84375 2.777344l65.226563-43.285156c4.589844-3.046875 5.851562-9.234375 2.820312-13.835938l-72.304687-109.675781 101.714843-31.453125c3.800782-1.175781 6.542969-4.488281 6.984376-8.441406.441406-3.953125-1.5-7.792969-4.945313-9.777344l-300.195313-172.929687c-3.289062-1.894532-7.363281-1.765626-10.523437.332031-3.160156 2.097656-4.863281 5.804687-4.394531 9.566406zm242.539062-174.878906-92.539062 28.617187c-3.003906.929688-5.398438 3.21875-6.460938 6.179688-1.058593 2.960937-.664062 6.25 1.066407 8.875l74.152343 112.476562-48.613281 32.261719-74.832031-112.023438c-1.746094-2.617187-4.625-4.257812-7.765625-4.429687-.183594-.011719-.367187-.015625-.550781-.015625-2.953125 0-5.753906 1.308594-7.652344 3.566406l-62.320312 74.152344-37.421876-301.128906zm0 0"})))}function Na(e){var t=e.fontSize;return c.a.createElement(Sa.a,{fontSize:t},c.a.createElement("svg",{enableBackground:"new 0 0 506.1 506.1",viewBox:"0 0 506.1 506.1",xmlns:"http://www.w3.org/2000/svg"},c.a.createElement("path",{d:"m489.609 506.1h-473.118c-9.108 0-16.491-7.384-16.491-16.491v-473.118c0-9.108 7.383-16.491 16.491-16.491h473.119c9.107 0 16.49 7.383 16.49 16.491v473.118c0 9.107-7.383 16.491-16.491 16.491zm-456.628-32.982h440.138v-440.137h-440.138z"})))}var za=a(287),Ta=a(100),La=a.n(Ta),Ia=Object(z.a)((function(e){return Object(T.a)({button:{marginLeft:3,marginRight:3,padding:8},select:{marginLeft:3,marginRight:3,padding:8,color:e.palette.primary.main},box:{width:"184px",display:"flex",flexWrap:"wrap","& > *":{margin:e.spacing(1)}},colorIcon:{"&:hover":{cursor:"pointer"},width:e.spacing(3.1),height:e.spacing(3.1)},badge:{backgroundColor:function(e){return e.color}}})}));function Wa(){var e=Object(l.b)(),t=Object(l.c)((function(e){return e.boardState.tool})),a=Object(l.c)((function(e){return e.boardState.color})),n=Object(i.useState)(),r=Object(R.a)(n,2),o=r[0],s=r[1],u=Ia({color:a}),d=Object(i.useCallback)((function(e){s(e.currentTarget)}),[t]),h=Object(i.useCallback)((function(){s(void 0)}),[]),m=Object(i.useCallback)((function(a){t!==Tt.Line?e(At(Tt.Line)):d(a)}),[t,a]);return c.a.createElement(c.a.Fragment,null,c.a.createElement(P.a,{title:"Brush",arrow:!0,className:t===Tt.Line?u.select:u.button},c.a.createElement(ce.a,{"aria-label":"Brush",onClick:m},t===Tt.Line?c.a.createElement(za.a,{variant:"dot",classes:{badge:u.badge},anchorOrigin:{vertical:"bottom",horizontal:"right"}},c.a.createElement(La.a,{fontSize:"small"})):c.a.createElement(La.a,{fontSize:"small"}))),c.a.createElement(K,{anchorEl:o,onClose:h,anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"right"}},c.a.createElement(oe.a,{p:2,className:u.box},Object.entries(zt).map((function(n){var r,o=Object(R.a)(n,2),i=o[0],s=o[1],l=a===s&&t===Tt.Line;return c.a.createElement(P.a,{key:i,title:i,arrow:!0},c.a.createElement(oe.a,{border:3,borderRadius:"50%",borderColor:l?"primary.main":""},c.a.createElement(B.a,{className:u.colorIcon,style:{backgroundColor:s},onClick:(r=s,function(){e(At(Tt.Line)),e(Pt(r)),h()})}," ")))})))))}var Ra=Object(z.a)((function(e){return Object(T.a)({root:{display:"flex",flexDirection:"column"},divider:{marginTop:5,marginBottom:5},button:{marginLeft:3,marginRight:3,padding:8},select:{marginLeft:3,marginRight:3,padding:8,color:e.palette.primary.main}})}));function Ba(){var e=Ra(),t=Object(l.b)(),a=Object(l.c)((function(e){return e.boardState.tool})),n=function(e){return function(){t(At(e))}};return c.a.createElement("div",{className:e.root},c.a.createElement(P.a,{title:"Code",arrow:!0,className:a===Tt.None?e.select:e.button},c.a.createElement(ce.a,{"aria-label":"Code",onClick:n(Tt.None)},c.a.createElement(wa.a,{fontSize:"small"}))),c.a.createElement(Ca.a,{className:e.divider}),c.a.createElement(Wa,null),c.a.createElement(P.a,{title:"Rect",arrow:!0,className:a===Tt.Rect?e.select:e.button},c.a.createElement(ce.a,{"aria-label":"rect",onClick:n(Tt.Rect)},c.a.createElement(Na,{fontSize:"small"}))),c.a.createElement(P.a,{title:"Selector",arrow:!0,className:a===Tt.Selector?e.select:e.button},c.a.createElement(ce.a,{"aria-label":"selector",onClick:n(Tt.Selector)},c.a.createElement(Ma,{fontSize:"small"}))),c.a.createElement(P.a,{title:"Eraser",arrow:!0,className:a===Tt.Eraser?e.select:e.button},c.a.createElement(ce.a,{"aria-label":"eraser",onClick:n(Tt.Eraser)},c.a.createElement(Da,{fontSize:"small"}))))}var Aa=110,Pa=Object(z.a)((function(){return Object(T.a)({root:{flexGrow:1,display:"flex"},editor:{width:"calc(100% - ".concat(42,"px)")},codeEditor:{width:"100%",height:"calc(100vh - ".concat(Aa,"px)")},canvas:{top:Aa,height:"calc(100vh - ".concat(Aa,"px)"),width:"calc(100% - ".concat(42,"px)"),position:"fixed",zIndex:function(e){return e===Tt.None?1:10}}})}));function Fa(e){var t=e.tool,a=Pa(t),n=Object(i.useState)(0),r=Object(R.a)(n,2),o=r[0],s=r[1],u=Object(i.useState)(0),l=Object(R.a)(u,2),d=l[0],h=l[1],m=Object(i.useRef)(null),f=Object(i.useRef)(null),v=Object(i.useCallback)((function(){var e;t===Tt.None&&(null===(e=f.current)||void 0===e||e.focus())}),[t]);return Object(i.useEffect)((function(){var e=function(){var e;if(m.current){var t=null===(e=m.current)||void 0===e?void 0:e.getBoundingClientRect();s(t.width),h(t.height)}};return e(),window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[]),c.a.createElement("div",{className:a.root,onClick:v,"aria-hidden":"true"},c.a.createElement("div",{className:a.editor,ref:m},c.a.createElement("div",{className:a.codeEditor},c.a.createElement(It,{forwardedRef:f})),c.a.createElement("div",{className:a.canvas},c.a.createElement(ka,{width:o,height:d}))),c.a.createElement(Ba,null))}var Ua=Object(z.a)((function(){return Object(T.a)({loading:{display:"flex",height:"calc(100vh - ".concat(Aa,"px)"),alignItems:"center",justifyContent:"center"}})})),Ha=function(e){var t=e.docKey,a=Ua(),n=Object(l.b)(),r=Object(l.c)((function(e){return e.docState.client})),o=Object(l.c)((function(e){return e.docState.doc})),s=Object(l.c)((function(e){return e.docState.status})),u=Object(l.c)((function(e){return e.boardState.tool})),d=Object(l.c)((function(e){return e.docState.loading})),h=Object(l.c)((function(e){return e.docState.errorMessage}));return Object(i.useEffect)((function(){return n(Pe()),function(){n(Ke())}}),[]),Object(i.useEffect)((function(){if(!r||!o)return function(){};var e=r.subscribe((function(e){if("peers-changed"===e.type){var t=o.getKey(),a=e.value[t];n($({myClientID:r.getID(),changedPeers:a}))}s===Me.Connect&&("status-changed"===e.type&&"deactivated"===e.value||"stream-connection-status-changed"===e.type&&"disconnected"===e.value||"document-synced"===e.type&&"sync-failed"===e.value)?n(Xe(Me.Disconnect)):s===Me.Disconnect&&("peers-changed"===e.type||"documents-changed"===e.type||"status-changed"===e.type&&"activated"===e.value||"stream-connection-status-changed"===e.type&&"connected"===e.value||"document-synced"===e.type&&"synced"===e.value)&&n(Xe(Me.Connect))}));return function(){e()}}),[r,o,s]),Object(i.useEffect)((function(){return n(Ve(t)),function(){n(Ye())}}),[t]),Object(i.useEffect)((function(){function e(){return(e=Object(Le.a)(Te.a.mark((function e(){return Te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r&&o){e.next=2;break}return e.abrupt("return");case 2:return n(_e(!0)),e.next=5,n(Fe({client:r,doc:o}));case 5:n(Ge(o.getRoot().mode||De.Markdown)),n(_e(!1));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return function(){e.apply(this,arguments)}(),function(){n(_e(!0))}}),[t,r,o]),h?c.a.createElement("div",null,c.a.createElement(xt.a,{open:!0,anchorOrigin:{vertical:"top",horizontal:"center"}},c.a.createElement(wt.a,{severity:"warning"},h||"fail to attach document"))):!d&&r&&o?c.a.createElement(Fa,{tool:u}):c.a.createElement(oe.a,{className:a.loading},c.a.createElement(Ct.a,{color:"inherit"}))},Ka=Object(z.a)((function(){return Object(T.a)({root:{flexGrow:1}})}));function Va(e){var t=Ka(),a=Object(f.f)(),n=e.match.params.docKey;return Object(i.useEffect)((function(){d.a.set({page:a.pathname}),d.a.pageview(a.pathname)}),[a]),c.a.createElement("div",{className:t.root},c.a.createElement(ht,null),c.a.createElement(jt,null),c.a.createElement(Ha,{docKey:n}))}a(224);var Ya=function(){var e=Object(l.c)((function(e){return e.settingState.menu})),t=Object(i.useMemo)((function(){return Object(b.a)({palette:{type:e.theme===n.Dark?"dark":"light",primary:{main:"#d8b01a"},secondary:{main:"#e6b602"}}})}),[e]),a=Object(i.useCallback)((function(){return c.a.createElement(f.a,{to:"/".concat(Math.random().toString(36).substring(7))})}),[]);return c.a.createElement(g.a,{theme:t},c.a.createElement(p.a,null),c.a.createElement(v.a,null,c.a.createElement(f.b,{path:"/",exact:!0,render:a}),c.a.createElement(f.b,{path:"/:docKey",exact:!0,component:Va})))},_a=a(28),Ga=Object(_a.c)({docState:Je,peerState:q,settingState:N,boardState:Ft}),Xa=Object(y.a)({reducer:Ga,middleware:Object(y.d)({serializableCheck:{ignoredActions:["doc/attach/fulfilled","doc/activate/fulfilled"],ignoredPaths:["docState.client","docState.doc"]},immutableCheck:{ignoredPaths:["docState.client","docState.doc"]}})});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(225);d.a.initialize("UA-42438082-5"),h.a({dsn:"https://d287d6df8c6f423189266360055e6ca7@o553194.ingest.sentry.io/5680102",release:"yorkie-codepair@".concat("f9595d8"),integrations:[new m.a.BrowserTracing],tracesSampleRate:1}),u.a.render(c.a.createElement(l.a,{store:Xa},c.a.createElement(Ya,null)),document.querySelector("#root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},24:function(e,t,a){"use strict";(function(e){function n(e,t,a,n){return e.addEventListener(t,a,n)}function r(e,t,a,n){return e.removeEventListener(t,a,n)}a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return r})),a.d(t,"c",(function(){return s}));var o={mouseup:"touchend",mouseout:"touchend",mousedown:"touchstart",mousemove:"touchmove"},i={mouseup:"pointerup",mouseout:"pointerup",mousedown:"pointerdown",mousemove:"pointermove"},c={mouseup:"MSPointerUp",mouseout:"MSPointerUp",mousedown:"MSPointerDown",mousemove:"MSPointerMove"};function s(t,a,n,r){e.navigator.pointerEnabled?a(t,i[n],r):e.navigator.msPointerEnabled?a(t,c[n],r):(a(t,o[n],r),a(t,n,r))}}).call(this,a(57))}},[[227,1,2]]]);
//# sourceMappingURL=main.f9ae1f57.chunk.js.map